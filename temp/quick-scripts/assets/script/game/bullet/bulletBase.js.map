{"version":3,"sources":["bulletBase.ts"],"names":[],"mappings":";;;;;AAEM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAA;AAGzC;IAAgC,8BAAY;IAD5C;QAAA,qEA4DC;QAzDG,WAAW;QACX,aAAO,GAAY,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;QACpC,WAAW;QACX,eAAS,GAAW,CAAC,CAAA;QACrB,SAAS;QACT,SAAG,GAA2B,SAAS,CAAA;QACvC,WAAW;QACX,mBAAa,GAA8B,SAAS,CAAA;;IAkDxD,CAAC;IAhDG,0BAAK,GAAL,UAAO,aAA4B,EAAE,IAAY,EAAE,IAAY,EAAE,KAAa,EAAE,GAAe;QAC3F,IAAI,CAAC,aAAa,GAAG,aAAa,CAAA;QAClC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;QACvB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAA;QACpB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;IACpB,CAAC;IAED,0BAAK,GAAL;QACI,sBAAsB;IAC1B,CAAC;IAED,cAAc;IACd,qCAAgB,GAAhB,UAAkB,KAAkB,EAAE,IAAiB;QACnD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;IACrB,CAAC;IAED,6BAAQ,GAAR,UAAU,KAAa;QACnB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;IAC1B,CAAC;IAED,2BAAM,GAAN,UAAQ,IAAY,EAAE,IAAY;QAC9B,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAA;QACrB,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAA;IACzB,CAAC;IAED,2BAAM,GAAN,UAAQ,GAAe;QACnB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAA;IAClB,CAAC;IAED,2BAAM,GAAN;QACI,OAAO,IAAI,CAAC,GAAG,CAAA;IACnB,CAAC;IAED,2BAAM,GAAN,UAAQ,EAAU;QACd,IAAI,IAAI,CAAC,SAAS,KAAK,CAAC;YAAE,OAAM;QAChC,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,EAAE;YACtB,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAA;SACjD;QACD,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,EAAE;YACtB,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAA;SACjD;QACD,WAAW;QACX,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE;YAC5D,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;YACjB,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;SAC/D;IACL,CAAC;IAzDQ,UAAU;QADtB,OAAO;OACK,UAAU,CA2DtB;IAAD,iBAAC;CA3DD,AA2DC,CA3D+B,EAAE,CAAC,SAAS,GA2D3C;AA3DY,gCAAU","file":"","sourceRoot":"../../../../../../assets/script/game/bullet","sourcesContent":["import BulletFactory, { BulletType } from \"../bullet/bulletFactory\"\n\nconst {ccclass, property} = cc._decorator\n\n@ccclass\nexport class BulletBase extends cc.Component {\n\n    /** 移动方向 */\n    moveDir: cc.Vec2 = new cc.Vec2(0, 0)\n    /** 移动速度 */\n    moveSpeed: number = 0\n    /** 标签 */\n    tag: BulletType | undefined = undefined\n    /** 子弹工厂 */\n    bulletFactory: BulletFactory | undefined = undefined\n\n    reuse (bulletFactory: BulletFactory, dirX: number, dirY: number, speed: number, tag: BulletType): void {\n        this.bulletFactory = bulletFactory\n        this.setDir(dirX, dirY)\n        this.setSpeed(speed)\n        this.setTag(tag)\n    }\n\n    unuse (): void {\n        // console.log('回收成功')\n    }\n\n    /** 碰撞后回收子弹 */\n    onCollisionEnter (other: cc.Collider, self: cc.Collider): void {\n        console.log('碰撞')\n    }\n\n    setSpeed (speed: number): void {\n        this.moveSpeed = speed\n    }\n\n    setDir (dirX: number, dirY: number): void {\n        this.moveDir.x = dirX\n        this.moveDir.y = dirY\n    }\n\n    setTag (tag: BulletType): void {\n        this.tag = tag\n    }\n\n    getTag (): BulletType {\n        return this.tag\n    }\n\n    update (dt: number): void {\n        if (this.moveSpeed === 0) return\n        if (this.moveDir.x !== 0) {\n            this.node.x += this.moveDir.x * this.moveSpeed\n        }\n        if (this.moveDir.y !== 0) {\n            this.node.y += this.moveDir.y * this.moveSpeed\n        }\n        /** 边界回收 */\n        if (Math.abs(this.node.x) > 360 || Math.abs(this.node.y) > 640) {\n            console.log('回收')\n            this.bulletFactory.bulletPools[this.getTag()].put(this.node)\n        }\n    }\n\n}\n"]}